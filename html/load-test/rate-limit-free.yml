config:
  target: '{{ $processEnvironment.API_BASE_URL }}'
  processor: 'auth.js'
  phases:
    - duration: 60
      arrivalRate: 1 # 1 request per second = 60 per minute, exceeds FREE limit of 20
  defaults:
    headers:
      Authorization: 'Bearer {{token}}'

scenarios:
  - name: 'Rate limit test for FREE user'
    beforeRequest:
      - loginFree
    flow:
      - get:
          url: '/v1/audio'
          headers:
            Authorization: 'Bearer {{token}}'
