config:
  target: '{{ $processEnvironment.API_BASE_URL }}'
  processor: 'auth.js'
  phases:
    - duration: 60
      arrivalRate: 2 # 2 requests per second = 120 per minute, exceeds PAID limit of 100
  defaults:
    headers:
      Authorization: 'Bearer {{token}}'

scenarios:
  - name: 'Rate limit test for PAID user'
    beforeRequest:
      - loginPaid
    flow:
      - get:
          url: '/v1/audio'
          headers:
            Authorization: 'Bearer {{token}}'
